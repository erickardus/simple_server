{% extends "base.html" %}

{% block content %}

    <h2>Choose a Server size and OS:</h2><br>

    <form action="aws_cluster_creator_step2" method="post" id="myform">
        {% csrf_token %}
        {{ form.as_p }}

        AMI: <select name="ami" id="ami" onchange="switchami()">
            <option value="" selected disabled>Select an AMI</option>
            {% for ami in ami_choices %}
            <option value="{{ ami.0 }}">{{ ami.1 }}</option>
            {% endfor %}
        </select>

        <br><br>
        SSH Username: <input name="ssh_username" id="ssh_username" type="text" name="SSH Username"><br><br>

        <input type="submit" value="Submit" /> <a href="https://aws.amazon.com/es/ec2/instance-types/" ><p align="right">More info</p></a>
    </form>

    <script>
        function switchami() {
            var form1 = document.getElementById("ami")
            var form2 = document.getElementById("ssh_username")
            var selection = form1.options[form1.selectedIndex].text

            if (selection.indexOf('Amazon') >= 0) {
                form2.value = 'ec2-user';
            }
            else if (selection.indexOf('SUSE') >= 0) {
                form2.value = 'root';
            }
            else if (selection.indexOf('Ubuntu') >= 0) {
                form2.value = 'ubuntu';
            }
        }
    </script>

{% endblock content %}
